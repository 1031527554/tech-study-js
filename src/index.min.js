function e(){try{const e=JSON.parse(GM_getValue("studySettings"));if(e&&Array.isArray(e)){if(e.length===ye.length)for(const t in e)ye[t]=e[t];return}}catch(e){}}function t(){Q(G("div",void 0,{class:"egg_tip_wrap"}))}function n(){if(fe()){const e=Z("meta[name=viewport]")[0];e&&(e.content="initial-scale=0, user-scalable=yes");const t=~~(window.innerWidth/window.outerWidth)||1;document.documentElement.style.setProperty("--scale",String(t))}}function i(){ye[h.SAME_TAB]&&window.addEventListener("message",(e=>{const{data:t}=e;t.id&&(Te.value=t.id,te(`初始化窗口 ID: ${Te.value}`))}))}async function o(){const e=await K(".title")[0];e&&e.parentNode?.insertBefore(G("button",void 0,{class:V((()=>"egg_exam_btn"+(Se.value?" manual":""))),type:"button",onclick:()=>{Se.value=!Se.value}},J(V((()=>Se.value?"开启自动答题":"关闭自动答题")))).ele,e.nextSibling)}async function a(e){const t={question:e};try{const e=await fetch(p.answerSearch,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){const t=await e.json(),{errno:n}=t;if(-1!==n){const{answers:e}=t.data;return e}}}catch(e){}return[]}async function r(e,t){try{const n=JSON.stringify([{title:e,content:t}]),i=new URLSearchParams({txt_name:e,txt_content:n,password:"",v_id:""}),o=await fetch(p.answerSave,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(o.ok){return await o.json()}}catch(e){}}async function s(e){const t=`${p.paperList}?pageSize=50&pageNo=${e}`;try{const e=await fetch(t,{method:"GET",credentials:"include"});if(e.ok){const t=await e.json(),n=decodeURIComponent(escape(window.atob(t.data_str.replace(/-/g,"+").replace(/_/g,"/"))));return JSON.parse(n)}}catch(e){return[]}return[]}GM_addStyle("* {  -webkit-tap-highlight-color: transparent;}:root {  --themeColor: #fa3333;  --scale: 1;  font-size: calc(10px * var(--scale));}@media (min-height: 678px) and (max-height: 768px) {  :root {    --scale: 0.8;  }}@media (max-height: 667px) {  :root {    --scale: 0.75;  }}@keyframes fade {  from {    opacity: 0.8;  }  to {    opacity: 0.4;    background: #ccc;  }}.egg_icon {  width: 1em;  height: 1em;  fill: currentColor;}.egg_hr_wrap {  position: relative;  display: flex;  justify-content: center;  color: #ccc;}.egg_hr_wrap .egg_hr {  position: absolute;  top: 50%;  transform: translateY(-50%);  background: currentColor;  height: 0.1rem;  width: 30%;}.egg_hr_wrap .egg_hr:nth-of-type(1) {  left: 0;}.egg_hr_wrap .egg_hr:nth-last-of-type(1) {  right: 0;}.egg_hr_title {  font-size: 1.2rem;}.egg_exam_btn {  transition: background-color 80ms;  outline: none;  border: none;  padding: 1.2rem 2rem;  border-radius: 1.2rem;  cursor: pointer;  font-size: 1.8rem;  font-weight: bold;  text-align: center;  color: #ffffff;  background: #666777;}.egg_exam_btn.manual {  background: #e3484b;}.egg_panel_wrap {  position: fixed;  left: 0;  top: 0;  z-index: 99999;  width: 100%;  height: 100%;  color: #333;  font-size: 1.6rem;  pointer-events: none;}.egg_panel {  position: absolute;  top: 5rem;  left: 1rem;  padding: 1.2rem 2rem;  border-radius: 1rem;  background: #ffffffe6;  backdrop-filter: blur(1rem);  box-shadow: 0 0 0.1rem 0.1rem #f1f1f1;  transition: 80ms ease-out;  pointer-events: all;}.egg_panel.hide {  left: 0;  transform: translateX(-100%);}.egg_panel_wrap.mobile .egg_panel {  top: 1rem;}@media (min-height: 678px) and (max-height: 768px) {  .egg_panel {    top: 2rem;  }}@media (max-height: 667px) {  .egg_panel {    top: 1rem;  }}.egg_panel button {  outline: none;  border: none;  padding: 0;  cursor: pointer;  background: none;}.egg_panel .egg_btns_wrap {  position: absolute;  left: 100%;  top: 50%;  transform: translate(-50%, -50%);  transition: 80ms ease;  z-index: 9;}.egg_panel.hide .egg_btns_wrap {  left: 100%;  transform: translate(0, -50%);}.egg_panel .egg_btns_wrap button {  border-radius: 50%;  width: 3rem;  height: 3rem;  padding: 0;  overflow: hidden;  border: 0.2rem solid currentColor;  color: white;  display: grid;  place-items: center;  font-size: 1.8rem;}.egg_panel.hide .egg_panel_show_btn {  background: var(--themeColor);}.egg_panel .egg_panel_show_btn {  background: #ccc;}.egg_panel .egg_frame_show_btn {  background: var(--themeColor);  margin-bottom: 1rem;}.egg_panel .egg_frame_show_btn.hide {  display: none;}.egg_panel .egg_setting_push_btn {  background: #ccc;  margin-top: 1rem;}.egg_panel .egg_setting_push_btn.hide {  display: none;}.egg_panel .egg_setting_push_btn.active {  background: var(--themeColor);}.egg_login_item {  display: flex;  justify-content: center;  align-items: center;  flex-direction: column;  padding: 0.5rem 0;}.egg_login_item .egg_login_btn {  font-size: 1.4rem;  border-radius: 1rem;  transition: 80ms ease;  color: white;  background: var(--themeColor);  padding: 0.8rem 2.4rem;}.egg_login_item .egg_login_btn:active {  opacity: 0.8;}.egg_login_item .egg_login_img_wrap {  height: 0;  border-radius: 1rem;  transition: height 80ms ease;  overflow: hidden;}.egg_login_item .egg_login_img_wrap.active {  padding: 0.8rem;  margin-top: 0.8rem;  height: auto;  background: white;}.egg_login_img_wrap .egg_login_img {  width: 15rem;  height: 15rem;}.egg_info_item .egg_login_btn {  font-size: 1.4rem;  border-radius: 1rem;  transition: 80ms ease;  color: white;}.egg_info_item .egg_login_btn:active {  opacity: 0.8;}.egg_info_item .egg_login_btn {  background: #ccc;  padding: 0.4rem 0.8rem;}.egg_info_item {  display: flex;  justify-content: space-between;  align-items: center;}.egg_info_item .egg_userinfo {  display: flex;  justify-content: center;  align-items: center;  padding: 0.5rem 0;}.egg_userinfo .egg_avatar .egg_avatar_nick,.egg_userinfo .egg_avatar .egg_avatar_img {  height: 5rem;  width: 5rem;  border-radius: 50%;  background: var(--themeColor);  display: flex;  justify-content: center;  align-items: center;  text-overflow: ellipsis;  overflow: hidden;  white-space: nowrap;  font-size: 2rem;  color: white;}.egg_userinfo .egg_nick {  padding-left: 0.5rem;  text-overflow: ellipsis;  overflow: hidden;  white-space: nowrap;  max-width: 10rem;}.egg_score_item .egg_scoreinfo {  display: flex;  justify-content: space-between;  align-items: center;  padding: 0.5rem 0;}.egg_scoreinfo .egg_totalscore,.egg_scoreinfo .egg_todayscore {  font-size: 1.2rem;  user-select: none;}.egg_scoreinfo .egg_totalscore span,.egg_scoreinfo .egg_todayscore .egg_todayscore_btn span {  padding-left: 0.2rem;}.egg_scoreinfo .egg_totalscore span,.egg_todayscore .egg_todayscore_btn span,.egg_todayscore .egg_score_details span {  color: var(--themeColor);  font-weight: bold;}.egg_scoreinfo .egg_todayscore {  position: relative;}.egg_todayscore .egg_todayscore_btn {  display: flex;  align-items: center;}.egg_todayscore_btn .egg_icon {  opacity: 0.3;}.egg_todayscore .egg_score_details {  position: absolute;  left: calc(100% + 1rem);  top: 0;  background: #fffffff2;  border-radius: 0.5rem;  opacity: 1;  width: 10rem;  box-shadow: 0 0 0.1rem 0.1rem #f1f1f1;  transition: 80ms ease;  z-index: 9;}.egg_todayscore .egg_score_details.hide {  visibility: hidden;  opacity: 0;  left: 100%;}.egg_score_details .egg_score_title {  border-bottom: 0.1rem solid #eee;  padding: 0.5rem 0.8rem;  display: flex;  align-items: center;}.egg_score_details .egg_score_title .egg_icon {  font-size: 1.4rem;}.egg_score_details .egg_score_title .egg_score_title_text {  font-weight: bold;  padding-left: 0.2rem;}.egg_score_details .egg_score_item {  display: flex;  align-items: center;  justify-content: space-between;  padding: 0.5rem 0.8rem;}.egg_task_list {  position: relative;}.egg_task_item {  user-select: none;}.egg_task_item.drag {  position: absolute;  z-index: 999;  border: dashed #ccc 0.1rem;  border-radius: 0.1rem;  background: #ffffffe6;  backdrop-filter: blur(1rem);  box-shadow: 0 0 0.1rem 0.1rem #f1f1f1;  cursor: move;  pointer-events: none;}.egg_task_item.edit {  border-radius: 0.5rem;}.egg_task_content {  min-height: 3rem;  min-width: 18rem;  display: flex;  align-items: center;  justify-content: space-between;}.egg_task_content .egg_label_wrap {  flex-grow: 1;}.egg_label_wrap .egg_progress {  display: flex;  justify-content: space-between;  align-items: center;  padding: 0.5rem 0;}.egg_progress .egg_track {  background: #ccc;  height: 0.5rem;  border-radius: 1rem;  flex: 1 1 auto;  overflow: hidden;}.egg_progress .egg_track .egg_bar {  height: 0.5rem;  background: var(--themeColor);  border-radius: 1rem;  width: 0;  transition: width 0.5s;}.egg_progress .egg_percent {  font-size: 1.2rem;  padding-left: 0.5rem;  width: 4rem;}.egg_setting_item {  min-height: 3rem;  min-width: 18rem;  display: flex;  align-items: center;  justify-content: space-between;  box-sizing: border-box;}.egg_setting_item .egg_label_wrap {  flex-grow: 1;}.egg_detail {  background: #ccc;  color: white;  border-radius: 10rem;  font-size: 1.2rem;  width: 1.6rem;  height: 1.6rem;  margin-left: 0.4rem;  display: inline-block;  text-align: center;  line-height: 1.6rem;  cursor: pointer;}.egg_switch {  cursor: pointer;  margin: 0;  outline: 0;  appearance: none;  -webkit-appearance: none;  -moz-appearance: none;  position: relative;  width: 4.2rem;  height: 2.2rem;  background: #ccc;  border-radius: 5rem;  transition: background 0.3s;  --border-padding: 0.5rem;  box-shadow: -0.1rem 0 0.1rem -0.1rem #999 inset,    0.1rem 0 0.1rem -0.1rem #999 inset;}.egg_switch::after {  content: '';  display: inline-block;  width: 1.4rem;  height: 1.4rem;  border-radius: 50%;  background: #fff;  box-shadow: 0 0 0.2rem #999;  transition: left 0.4s;  position: absolute;  top: calc(50% - (1.4rem / 2));  position: absolute;  left: var(--border-padding);}.egg_switch:checked {  background: var(--themeColor);}.egg_switch:disabled {  opacity: 0.5;  background: #ccc;}.egg_switch:checked::after {  left: calc(100% - var(--border-padding) - 1.4rem);}.egg_study_item {  display: flex;  justify-content: center;  padding-top: 0.5rem;}.egg_study_item .egg_study_btn {  background: var(--themeColor);  padding: 0.8rem 2.4rem;  font-size: 1.4rem;  border-radius: 1rem;  color: white;  transition: 80ms ease;}.egg_study_item .egg_study_btn:not(.loading, .disabled):active {  opacity: 0.8;}.egg_study_item .egg_study_btn.loading {  animation: fade 2s ease infinite alternate;}.egg_study_item .egg_study_btn.disabled {  background: #ccc;}.egg_tip_wrap {  position: fixed;  left: 0;  top: 0;  z-index: 999999;  width: 100%;  height: 100%;  pointer-events: none;}.egg_tip_wrap .egg_tip {  position: absolute;  bottom: 2rem;  left: 2rem;  padding: 1.2rem 1.4rem;  border: none;  border-radius: 1rem;  background: var(--themeColor);  color: white;  font-size: 1.4rem;  transition: 200ms ease;  opacity: 0;  transform: scale(0.9) translateY(1rem);}.egg_tip_wrap .egg_tip.active {  opacity: 1;  transform: scale(1) translateY(0);}.egg_tip_wrap .egg_tip.active.delay {  opacity: 0.5;}.egg_tip_wrap .egg_tip .egg_countdown {  display: inline-block;  color: var(--themeColor);  background: white;  border-radius: 0.5rem;  padding: 0.2rem 0.4rem;  font-weight: bold;  margin-left: 0.4rem;  font-size: 1.2rem;}.egg_frame_wrap {  position: fixed;  left: 0;  top: 0;  z-index: 999;  width: 100%;  height: 100%;  visibility: visible;}.egg_frame_wrap.hide {  visibility: hidden;}.egg_frame_wrap.hide .egg_frame_mask,.egg_frame_wrap.hide .egg_frame_content_wrap {  opacity: 0;}.egg_frame_wrap.hide .egg_frame_content_wrap {  transform: scale(0);}.egg_frame_mask {  background: #00000030;  width: 100%;  height: 100%;  opacity: 1;  transition: 200ms ease;}.egg_frame_content_wrap {  position: absolute;  width: 80%;  height: 80%;  top: 10%;  left: 10%;  display: flex;  flex-direction: column;  transition: 200ms ease;  border-radius: 1rem;  background: #ffffffe6;  backdrop-filter: blur(1rem);  overflow: hidden;  transform: scale(1);}.egg_frame_content_wrap.max {  top: 0;  left: 0;  width: 100%;  height: 100%;  border-radius: 0;}.egg_frame_content_wrap .egg_frame_controls_wrap {  width: 100%;  display: flex;  justify-content: space-between;  align-items: center;  box-sizing: border-box;}.egg_frame_controls_wrap .egg_frame_title {  padding: 1rem 2rem;  font-size: 1.6rem;}.egg_frame_controls .egg_frame_btn {  outline: none;  border: none;  background: none;  padding: 1rem 2rem;  transition: 80ms ease;  cursor: pointer;  color: #333;  font-size: 1.8rem;}.egg_frame_controls .egg_frame_btn:active {  opacity: 0.8;}.egg_frame_wrap .egg_frame_content {  width: 100%;  flex-grow: 1;  border-top: 0.1rem solid #ccc;  min-height: 40rem;  min-width: 30rem;  background: white;}.egg_frame_content .egg_frame {  width: 100%;  height: 100%;  outline: none;  border: none;}.egg_time_input {  display: inline-flex;  align-items: center;  justify-content: center;}.egg_time_input input {  outline: none;  border: 0.1rem solid #eee;  width: 2rem;  padding: 0.8rem;  text-align: center;  background: white;  border-radius: 0.2rem;}.egg_time_input input::placeholder {  color: #ccc;}.egg_time_input span {  padding: 0 0.5rem;  font-size: 1.5rem;}.egg_list {  max-height: 12rem;  overflow: auto;  border-radius: 0 0 0.2rem 0.2rem;  box-shadow: 0.1rem 0.1rem 0.1rem 0.1rem #eee;  position: absolute;  background: white;  z-index: 9;  scroll-behavior: smooth;  user-select: none;  transition: 100ms ease;  opacity: 1;  scrollbar-width: thin;}.egg_list.hide {  opacity: 0;  visibility: hidden;}.egg_list::-webkit-scrollbar {  width: 0.4rem;  background: white;  border-radius: 0.2rem;}.egg_list::-webkit-scrollbar-thumb {  background: #ccc;  border-radius: 0.2rem;}.egg_list .egg_time {  padding: 0.6rem 1rem;  border-bottom: 0.1rem solid #eee;  cursor: pointer;  color: #333;  transition: 100ms ease;}.egg_list .egg_time.focus {  font-weight: bold;  background: #eee;}.egg_list .egg_time:hover {  background: #eee;}.egg_schedule {  display: inline-flex;  flex-direction: column;  font-size: 1.4rem;  background: white;  border-radius: 1rem;  overflow: hidden;}.egg_schedule .egg_schedule_label {  padding: 1rem 0;  user-select: none;}.egg_schedule .egg_schedule_token_wrap {  padding: 1.5rem 2rem 0 2rem;}.egg_schedule_token_wrap .egg_schedule_token_input {  outline: none;  border: 0.1rem solid #eee;  padding: 1rem;  background: white;  border-radius: 0.2rem;  width: 100%;  box-sizing: border-box;  color: #ccc;}.egg_schedule_token_wrap .egg_schedule_token_input.active {  color: #333;}.egg_schedule_token_input::placeholder {  color: #ccc;}.egg_schedule .egg_schedule_submit_btn_wrap {  text-align: right;  padding-top: 1rem;  display: none;}.egg_schedule .egg_schedule_submit_btn_wrap.active {  display: block;}.egg_schedule_submit_btn_wrap .egg_schedule_submit_btn {  outline: none;  border: 0.1rem solid #eee;  padding: 0.5rem 1rem;  text-align: center;  background: white;  border-radius: 0.2rem;  cursor: pointer;}.egg_schedule_submit_btn_wrap .egg_schedule_submit_btn:active {  background: #eee;}.egg_schedule_add {  height: 100%;  display: flex;  flex-direction: column;}.egg_schedule_time_wrap {  padding: 1.5rem 2rem;  border-bottom: 0.1rem solid #eee;}.egg_schedule_time_input_wrap {  display: flex;  justify-content: space-between;  align-items: center;}.egg_schedule_time_input_wrap .egg_schedule_add_btn {  outline: none;  border: 0.1rem solid #eee;  padding: 0.5rem 1rem;  text-align: center;  background: white;  border-radius: 0.2rem;  cursor: pointer;}.egg_schedule_time_input_wrap .egg_schedule_add_btn:active {  background: #eee;}.egg_schedule_list {  height: 100%;  overflow: auto;}.egg_schedule_list .egg_schedule_item {  display: flex;  justify-content: space-between;  padding: 0.5rem 1.5rem;  font-size: 1.4rem;  border-bottom: 0.1rem solid #eee;}.egg_schedule_list::-webkit-scrollbar {  width: 0.4rem;  background: white;  border-radius: 0.2rem;}.egg_schedule_list::-webkit-scrollbar-thumb {  background: #ccc;  border-radius: 0.2rem;}.egg_schedule_detail_time_wrap {  display: flex;  align-items: center;}.egg_schedule_detail_time_wrap.inactive {  color: #ccc;}.egg_schedule_detail_time_wrap .egg_schedule_detail_icon {  padding-right: 0.4rem;  display: flex;  color: #ccc;}.egg_schedule_detail_del_wrap .egg_schedule_del_btn {  outline: none;  padding: 1rem;  text-align: center;  background: white;  border-radius: 0.2rem;  font-size: 1.4rem;  cursor: pointer;  color: #ccc;}.egg_schedule_detail_del_wrap .egg_schedule_del_btn:hover {  color: #333;}.egg_schedule_detail_del_wrap .egg_schedule_del_btn:active {  color: #eee;}.egg_schedule_list .egg_schedule_list_none {  width: 100%;  height: 100%;  display: flex;  flex-direction: column;  justify-content: center;  align-items: center;  color: #ccc;}.egg_schedule_list_none .egg_icon {  font-size: 2.5rem;}.egg_schedule_list_none_text {  padding-top: 1rem;}.egg_settings_item {  position: absolute;  top: 0;  left: 0;  width: 100%;  height: 100%;  pointer-events: none;  overflow: hidden;  border-radius: 1rem;}.egg_settings_item .egg_schedule {  width: 100%;  height: 100%;  pointer-events: all;  transform: translateX(100%);  transition: 300ms ease;}.egg_settings_item .egg_schedule.active {  transform: translateX(0);}"),we((e=>e.match(v.home)),(()=>{console.log(`%c tech-study.js %c ${f} `,"background:dodgerblue;color:white;font-size:15px;border-radius:4px 0 0 4px;padding:2px 0;","background:black;color:gold;font-size:15px;border-radius:0 4px 4px 0;padding:2px 0;"),te("进入主页面!"),function(){try{const e=JSON.parse(GM_getValue("taskConfig"));if(e&&e.length===be.length)be.forEach(((t,n)=>{t.active.value=e[n].active,t.index.value=e[n].index}))}catch(e){}}(),e(),n(),t(),async function(){Q(function(){const e=[{title:"自动开始",tip:"启动时, 自动开始任务, 在倒计时结束前自动开始可随时取消; 如果在自动开始前手动开始任务, 此次自动开始将取消",type:h.AUTO_START},{title:"同屏任务",tip:"运行任务时，所有任务均在当前页面以弹窗方式运行",type:h.SAME_TAB},{title:"静默运行",tip:"同屏任务时, 不显示任务弹窗静默运行",type:h.SILENT_RUN},{title:"定时刷新",tip:"定时刷新页面，重新进行任务，此功能需要长时间占用浏览器",type:h.SCHEDULE_RUN}],t=[{title:"随机作答",tip:"无答案时, 随机选择或者填入答案, 不保证正确",type:h.RANDOM_EXAM},{title:"专项逆序",tip:"专项答题时, 逆序作答",type:h.PAPER_REVERSE}],n=[{title:"远程推送",tip:"利用 pushplus 推送, 将登录二维码直接推送到微信公众号",type:h.REMOTE_PUSH,handler(){}}],i=(e,t,n)=>{const{checked:i}=e.target;ye[t]!==i&&(ye[t]=i,GM_setValue("studySettings",JSON.stringify(ye)),dt(`${n} ${i?"打开":"关闭"}!`))},o=C(!1),a=C(!1);return G("div",void 0,{class:"egg_panel_wrap"+(fe()?" mobile":"")},G("div",void 0,{class:V((()=>"egg_panel"+(a.value?" hide":"")))},[_t(),ht(),mt(),pt({text:"任务"}),bt(),pt({text:"运行"}),G("div",void 0,{class:"egg_run_list"},V((()=>e.map((e=>{const t=pe(i,300);return wt({title:e.title,tip:e.tip,checked:ye[e.type],onChange:n=>{t(n,e.type,e.title)}})}))))),pt({text:"答题"}),G("div",void 0,{class:"egg_exam_list"},V((()=>t.map((e=>{const t=pe(i,300);return wt({title:e.title,tip:e.tip,checked:ye[e.type],onChange:n=>{t(n,e.type,e.title)}})}))))),pt({text:"推送"}),G("div",void 0,{class:"egg_push_list"},V((()=>n.map((e=>{const t=pe(i,300);return wt({title:e.title,tip:e.tip,checked:ye[e.type],onChange:n=>{t(n,e.type,e.title)}})}))))),G("div",void 0,{class:"egg_btns_wrap"},[G("button",void 0,{class:O((()=>[Ie.exist,Ie.show]),(()=>"egg_frame_show_btn"+(!Ie.exist||Ie.show?" hide":""))),type:"button",onclick:pe((()=>{Ie.show=!0}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M836.224 106.666667h-490.666667a85.589333 85.589333 0 0 0-85.333333 85.333333V256h-64a85.589333 85.589333 0 0 0-85.333333 85.333333v490.666667a85.589333 85.589333 0 0 0 85.333333 85.333333h490.666667a85.589333 85.589333 0 0 0 85.333333-85.333333V768h64a85.589333 85.589333 0 0 0 85.333333-85.333333V192a85.589333 85.589333 0 0 0-85.333333-85.333333z m-132.266667 725.333333a20.138667 20.138667 0 0 1-21.333333 21.333333h-490.666667a20.138667 20.138667 0 0 1-21.333333-21.333333V341.333333a20.138667 20.138667 0 0 1 21.333333-21.333333h494.933334a20.138667 20.138667 0 0 1 21.333333 21.333333v490.666667z m153.6-149.333333a20.138667 20.138667 0 0 1-21.333333 21.333333h-64V341.333333a85.589333 85.589333 0 0 0-85.333333-85.333333h-362.666667V192a20.138667 20.138667 0 0 1 21.333333-21.333333h490.666667a20.138667 20.138667 0 0 1 21.333333 21.333333z"}))),G("button",void 0,{class:"egg_panel_show_btn",type:"button",onclick:pe((()=>{a.value=!a.value}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M332.16 883.84a40.96 40.96 0 0 0 58.24 0l338.56-343.04a40.96 40.96 0 0 0 0-58.24L390.4 140.16a40.96 40.96 0 0 0-58.24 58.24L640 512l-307.84 314.24a40.96 40.96 0 0 0 0 57.6z"}))),G("button",void 0,{class:O((()=>[ye[h.REMOTE_PUSH],ye[h.SCHEDULE_RUN],o.value]),(()=>ye[h.REMOTE_PUSH]||ye[h.SCHEDULE_RUN]?"egg_setting_push_btn"+(o.value?" active":""):"egg_setting_push_btn hide")),type:"button",onclick:pe((()=>{o.value=!o.value}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},[B("path",void 0,{d:"M825.571556 176.355556c68.778667 0 124.472889 55.751111 124.472888 124.416v422.456888c0 68.721778-55.751111 124.416-124.472888 124.416H198.485333A124.416 124.416 0 0 1 73.955556 723.171556V300.828444C73.955556 232.106667 129.706667 176.355556 198.428444 176.355556zM893.155556 358.456889l-366.08 228.864a28.444444 28.444444 0 0 1-25.372445 2.389333l-4.778667-2.389333L130.844444 358.456889v364.771555c0 34.929778 26.567111 63.715556 60.643556 67.128889l6.883556 0.398223h627.2c37.319111 0 67.584-30.264889 67.584-67.584V358.513778zM825.571556 233.244444H198.485333c-34.304 0-62.577778 25.486222-67.015111 58.595556L512 529.635556l380.586667-237.795556A67.584 67.584 0 0 0 825.628444 233.244444z"})]))]),yt(),G("div",void 0,{class:"egg_settings_item"},[Et({scheduleShow:o})])]))}())}(),function(){const e=ft();Q(e)}()})),we((e=>e===GM_getValue("readingUrl")),(async()=>{te("进入文章选读页面!"),e(),n(),i(),t(),async function(){const e=(await K("section",void 0,5e3))[0];if(!e||!e.innerText.includes("系统正在维护中"))return void it(0);te("未找到文章!"),dt("未找到文章!"),Fe(Te.value)}()})),we((e=>e===GM_getValue("watchingUrl")),(async()=>{te("进入视听学习页面!"),e(),n(),i(),t(),async function(){const e=await K("video",void 0,1e4),t=e[0],n=Z(".prism-play-btn")[0];if(t&&n){t.muted=g,te("正在尝试播放视频...");const e=setTimeout((()=>{te("视频播放超时!"),dt("视频播放超时!"),Fe(Te.value)}),2e4);return void t.addEventListener("canplay",(()=>{te("正在尝试播放视频..."),t.paused&&(t.play(),t.paused&&n.click()),t.paused||(clearTimeout(e),it(1))}))}te("未找到视频!"),Fe(Te.value)}()})),we((e=>e===v.examPractice),(async()=>{te("进入每日答题页面!"),e(),n(),i(),t(),await o(),Ve(Ne.PRACTICE)})),we((e=>e.includes(v.examPaper)),(async()=>{te("进入专项练习页面!"),e(),n(),i(),t(),await o(),Ve(Ne.PAPER)}));const c=6,l=6,d=10,u=1e5,g=!0,v={home:/^https\:\/\/www\.xuexi\.cn(\/(index\.html)?)?$/,homeOrigin:"https://www.xuexi.cn",examPractice:"https://pc.xuexi.cn/points/exam-practice.html",examPaper:"https://pc.xuexi.cn/points/exam-paper-detail.html"},p={userInfo:"https://pc-api.xuexi.cn/open/api/user/info",totalScore:"https://pc-proxy-api.xuexi.cn/delegate/score/get",todayScore:"https://pc-proxy-api.xuexi.cn/delegate/score/today/query",taskList:"https://pc-proxy-api.xuexi.cn/api/score/days/listScoreProgress?sence=score&deviceType=2",todayNews:["https://www.xuexi.cn/lgdata/35il6fpn0ohq.json","https://www.xuexi.cn/lgdata/1ap1igfgdn2.json","https://www.xuexi.cn/lgdata/vdppiu92n1.json","https://www.xuexi.cn/lgdata/152mdtl3qn1.json"],todayVideos:["https://www.xuexi.cn/lgdata/525pi8vcj24p.json","https://www.xuexi.cn/lgdata/11vku6vt6rgom.json","https://www.xuexi.cn/lgdata/2qfjjjrprmdh.json","https://www.xuexi.cn/lgdata/3o3ufqgl8rsn.json","https://www.xuexi.cn/lgdata/591ht3bc22pi.json","https://www.xuexi.cn/lgdata/1742g60067k.json","https://www.xuexi.cn/lgdata/1novbsbi47k.json"],paperList:"https://pc-proxy-api.xuexi.cn/api/exam/service/paper/pc/list",answerSave:"https://a6.qikekeji.com/txt/data/save",answerSearch:"https://api.answer.redfish.top/answer/search",push:"https://www.pushplus.plus/send",generateQRCode:"https://login.xuexi.cn/user/qrcode/generate",loginWithQRCode:"https://login.xuexi.cn/login/login_with_qr",sign:"https://pc-api.xuexi.cn/open/api/sns/sign",secureCheck:"https://pc-api.xuexi.cn/login/secure_check",qrcode:"https://api.qrserver.com/v1/create-qr-code"},f="dev 1.6.0";var _,h,m;let w;!function(e){e[e.READ=0]="READ",e[e.WATCH=1]="WATCH",e[e.PRACTICE=2]="PRACTICE",e[e.PAPER=3]="PAPER"}(_||(_={})),function(e){e[e.AUTO_START=0]="AUTO_START",e[e.SAME_TAB=1]="SAME_TAB",e[e.SILENT_RUN=2]="SILENT_RUN",e[e.SCHEDULE_RUN=3]="SCHEDULE_RUN",e[e.RANDOM_EXAM=4]="RANDOM_EXAM",e[e.PAPER_REVERSE=5]="PAPER_REVERSE",e[e.REMOTE_PUSH=6]="REMOTE_PUSH"}(h||(h={})),function(e){e[e.LOADING=0]="LOADING",e[e.LOADED=1]="LOADED",e[e.START=2]="START",e[e.PAUSE=3]="PAUSE",e[e.FINISH=4]="FINISH"}(m||(m={}));const b=new WeakMap,y=new WeakMap,x=e=>{if(!w)return;let t=b.get(e);if(!t){t=new Map;const n=new Set;return n.add(w),t.set("value",n),void b.set(e,t)}let n=t.get("value");if(!n)return n=new Set,n.add(w),t.set("value",n),void b.set(e,t);n.add(w)};function E(e,t,n,i){if(!y.get(e))return;const o=b.get(e);if(!o)return;let a=o.get(t);if(a)for(const e of a)e(n,i)}var k;!function(e){e.IS_REF="_isRef",e.IS_SHALLOW="_isShallow",e.IS_REACTIVE="_isReactive",e.IS_READONLY="_isReadonly"}(k||(k={}));class M{_isShallow=!1;_isRef=!0;_value;value;constructor(e,t=!1){const n=this;if(this._isShallow=t,e&&"object"==typeof e&&t){const t=j(e);this._value=t,this.value=t}else this._value=e,this.value=e;Object.defineProperty(this,"value",{get(){return x(this),n._value},set(e){const t=this._value;t!==e&&(n._value=e,function(e,t,n){const i=b.get(e);if(!i)return;let o=i.get("value");if(o)for(const e of o)e instanceof Function&&e(t,n)}(this,e,t))}})}toJSON(){return this._value}}const S=e=>!(!e||!e[k.IS_REF]),A=(e,t)=>new M(e,t),T=e=>S(e)?e.value:e,C=e=>S(e)?e:A(e,!0),R=e=>S(e)?e:A(e,!1),P=(e,t)=>function(n,i,o){if(i===k.IS_REACTIVE)return!e;if(i===k.IS_READONLY)return e;if(i===k.IS_SHALLOW)return t;const a=Reflect.get(n,i,o);return e||((e,t)=>{if(!w)return;if(!y.get(e))return;let n=b.get(e);if(!n){n=new Map;const i=new Set;return i.add(w),n.set(t,i),void b.set(e,n)}let i=n.get(t);if(!i)return i=new Set,i.add(w),n.set(t,i),void b.set(e,n);i.add(w)})(n,i),t?a:S(a)?a.value:a&&"object"==typeof a?e?U(a):j(a):a},I=(e,t)=>function(n,i,o,a){if(e)return!1;const r=n[i];if(z(r)&&S(r)&&!S(o))return!1;if(!t&&S(r)&&!S(o))return r.value=o,!0;const s=Reflect.set(n,i,o,a);return Array.isArray(n)&&"length"===i?(E(n,i,o,r),s):(r!==o&&E(n,i,o,r),s)},L=(e,t,n)=>{const i=y.get(e);if(i)return i;const o=new Proxy(e,((e,t)=>({get:P(e,t),set:I(e,t)}))(t,n));return y.set(e,o),o},N=e=>L(e,!1,!0),z=e=>!(!e||!e[k.IS_READONLY]),$=e=>(e=>!(!e||!e[k.IS_REACTIVE]))(e)||z(e),j=e=>(e=>L(e,!1,!1))(e),U=e=>(e=>L(e,!0,!1))(e),D=(e,t,n=!1)=>{if(n&&t(T(e),T(e)),Array.isArray(e)&&e.every((e=>S(e)))){for(const n in e)$(e[n])&&D(e[n],(()=>{const n=e.map((e=>T(e)));t(n,n)}));D((()=>e.map((e=>T(e)))),t)}else if(e instanceof Function)D(V(e),((e,n)=>{t(T(e),T(n))}));else{if(!$(e))return S(e)?($(e.value)&&D(e.value,(()=>{t(T(e),T(e))})),w=t,x(e),void(w=void 0)):void 0;for(const n in e){w=()=>{t(e,e)};const i=e[n];w=void 0,D(i,(()=>{t(e,e)}))}}},H=e=>{w=e,e(),w=void 0},O=(e,t)=>{const n=R(t());return D(e,(()=>n.value=T(t()))),n},V=e=>{const t=R(void 0);return H((()=>t.value=T(e()))),t};function G(e,t,n,i,o){let a=C(!1),r=C(!1);const{onCreated:s,beforeCreat:c,onMounted:l,beforeMount:d}=o||{};c&&c();const u=document.createElement(e);W(u,t),function(e,t){if(t)for(const n in t)F(e,n,t[n])}(u,n);X(u,i,(e=>{const{onMounted:t,beforeMount:n}=e;if(n){if(a.value)return void n();D(a,(()=>{a.value&&n()}))}if(t){if(r.value)return void t();D(r,(()=>{r.value&&t()}))}}),(e=>{}));return s&&s(),{ele:u,beforeMount:()=>{a.value=!0,d&&d()},onMounted:()=>{r.value=!0,l&&l()}}}function B(e,t,n,i,o){let a=C(!1),r=C(!1);const{onCreated:s,beforeCreat:c,onMounted:l,beforeMount:d}=o||{};c&&c();const u=document.createElementNS("http://www.w3.org/2000/svg",e);W(u,t),function(e,t){if(t)for(const n in t)q(e,n,t[n]),F(e,n,t[n])}(u,n);X(u,i,(e=>{const{onMounted:t,beforeMount:n}=e;if(n){if(a.value)return void n();D(a,(()=>{a.value&&n()}))}if(t){if(r.value)return void t();D(r,(()=>{r.value&&t()}))}}),(e=>{}));return s&&s(),{ele:u,beforeMount:()=>{a.value=!0,d&&d()},onMounted:()=>{r.value=!0,l&&l()}}}function W(e,t){for(const n in t)if(S(t[n])){const i=t[n];H((()=>e[n]=i.value))}else e[n]=t[n]}function q(e,t,n){if(t.startsWith("xlink:")){const i="http://www.w3.org/1999/xlink";n?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}else;}function F(e,t,n){const i=t.toLowerCase();if(i.startsWith("on")){const[t]=i.match(/(?<=on).*/);if(t){const[i,...o]=t.split("_"),a=function(e){if(e.length)return{capture:e.includes("capture"),once:e.includes("once"),passive:e.includes("passive")}}(o);if(S(n)){const t=n,r=O(t,(()=>t.value?e=>{o.includes("prevent")&&e.preventDefault(),o.includes("stop")&&e.stopPropagation();(0,t.value)(e)}:void 0));return r.value&&e.addEventListener(i,r.value,a),void D(r,((t,n)=>{n&&e.removeEventListener(i,n),t&&e.addEventListener(i,t,a)}))}n instanceof Function&&e.addEventListener(i,n,a)}return}if(["checked","selected","disabled","enabled"].includes(i)){if(S(n)){const t=n;return void H((()=>{t.value?e.setAttribute(i,""):e.removeAttribute(i)}))}n?e.setAttribute(i,""):e.removeAttribute(i)}else if("ref"!==i)if(t&&S(n)){const i=n;H((()=>{e.setAttribute(t,i.value)}))}else t&&e.setAttribute(t,n);else{if(S(n)){n.value=e}if(n instanceof Function){n(e)}}}function X(e,t,n,i){if(S(t)){const o=document.createComment("");if(D(t,(async(t,a)=>{if(!t&&a){if(a instanceof Promise){const e=await a;e&&e.forEach((e=>{i&&i(e)}))}return a instanceof Promise||a.forEach((e=>{i&&i(e)})),void e.replaceChildren(o)}if(t){if(a){if(a instanceof Promise){const e=await a;e&&e.forEach((e=>{i&&i(e)}))}a instanceof Promise||a.forEach((e=>{i&&i(e)}))}if(t instanceof Promise){const i=await t;if(i){const t=i.map((e=>((e.beforeMount||e.onMounted)&&n&&n(e),e.ele)));e.replaceChildren(ee(t))}return}const o=t.map((e=>((e.beforeMount||e.onMounted)&&n&&n(e),e.ele)));e.replaceChildren(ee(o))}else;})),t.value instanceof Promise)return e.appendChild(o),void t.value.then((t=>{if(t){const i=t.map((e=>((e.beforeMount||e.onMounted)&&n&&n(e),e.ele)));e.replaceChildren(ee(i))}}));if(t.value){const i=t.value.map((e=>((e.beforeMount||e.onMounted)&&n&&n(e),e.ele)));return void e.appendChild(ee(i))}e.appendChild(o)}else{if(t instanceof Promise){const i=document.createComment("");return e.appendChild(i),void t.then((e=>{if(e){const{beforeMount:t,onMounted:o}=e;(t||o)&&n&&n(e),i.replaceWith(e.ele)}}))}if(Array.isArray(t)){const o=[];for(const e in t){const a=t[e];if(S(a)){const t=document.createComment("");if(D(a,(async(e,o)=>{if(e||!o)if(!e||o){if(e&&o){if(e instanceof Promise&&o instanceof Promise){return void Y(await e,await o,t,n,i)}if(e instanceof Promise&&!(o instanceof Promise)){return void Y(await e,o,t,n,i)}if(!(e instanceof Promise)&&o instanceof Promise){return void Y(e,await o,t,n,i)}if(!(o instanceof Promise||e instanceof Promise))return void Y(e,o,t,n,i)}}else{if(e instanceof Promise){const a=await e;return void(a&&Y(a,o,t,n,i))}Y(e,o,t,n,i)}else{if(o instanceof Promise){const a=await o;return void(a&&Y(e,a,t,n,i))}Y(e,o,t,n,i)}})),a.value instanceof Promise){o[e]={ele:t},a.value.then((e=>{if(e){const{beforeMount:i,onMounted:o}=e;(i||o)&&n&&n(e),t.replaceWith(e.ele)}}));continue}if(a.value){const{beforeMount:t,onMounted:n,ele:i}=a.value;o[e]={ele:i,beforeMount:t,onMounted:n};continue}o[e]={ele:t}}else if(a instanceof Promise){const t=document.createComment("");o[e]={ele:t},a.then((e=>{if(e){const{beforeMount:i,onMounted:o}=e;(i||o)&&n&&n(e),t.replaceWith(e.ele)}}))}else if(a){const{beforeMount:t,onMounted:n,ele:i}=a;o[e]={ele:i,beforeMount:t,onMounted:n}}}const a=o.map((e=>((e.beforeMount||e.onMounted)&&n&&n(e),e.ele)));e.appendChild(ee(a))}else if(t){const{beforeMount:i,onMounted:o}=t;return(i||o)&&n&&n(t),void e.appendChild(t.ele)}}}function Y(e,t,n,i,o){if(e&&t){const{beforeMount:n,onMounted:o}=e;return(n||o)&&i&&i(e),void t.ele.replaceWith(e.ele)}if(e&&!t){const{beforeMount:t,onMounted:o}=e;return(t||o)&&i&&i(e),void n.replaceWith(e.ele)}if(!e&&t)return o&&o(t),void t.ele.replaceWith(n)}function J(e,t){const{onCreated:n,beforeCreat:i,onMounted:o,beforeMount:a}=t||{};if(i&&i(),S(e)){const t=e,i=document.createTextNode("");return H((()=>{i.data=t.value})),n&&n(),{ele:i,beforeMount:a,onMounted:o}}return n&&n(),{ele:document.createTextNode(String(e)),beforeMount:a,onMounted:o}}function Q(e,t=document.body){const{ele:n,beforeMount:i,onMounted:o}=e;n&&(i&&i(),t.appendChild(n),o&&o())}function Z(e,t=document){return Array.from(t.querySelectorAll(e))}function K(e,t=document,n){return new Promise((i=>{const o=setInterval((()=>{const n=Array.from(t.querySelectorAll(e));n.length&&(clearInterval(o),i(n))}),10);n&&setTimeout((()=>{clearInterval(o),i([])}),n)}))}function ee(e){const t=document.createDocumentFragment();for(const n in e)t.appendChild(e[n]);return t}function te(...e){console.log(`%c[${de()}] %c${e.join(" ")}`,"","color:dodgerblue")}function ne(e,t){return`<div\n    style="\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 1px 0;\n    "\n  >\n    <span>${e}</span>\n    <span>${ie(t)} %</span>\n  </div>\n  <div\n    style="\n      background: white;\n      border-radius: 10px;\n      height: 10px;\n      border: 1px solid #eee;\n      flex-shrink: 1;\n    "\n  >\n    <div\n      style="\n        background: linear-gradient(to left, #188fff80, #1890ff);\n        height: 100%;\n        width: ${t}%;\n        border-radius: 10px;\n      "\n    ></div>\n  </div>`}function ie(e){return`<span style="color: #1890ff">${e}</span>`}async function oe(e){const{title:t,content:n,template:i,fromToken:o,toToken:a}=e,r=await async function(e,t,n,i,o){try{const a={token:e,title:t,content:n,template:i};o&&(a.to=o);const r=await fetch(p.push,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok)return await r.json()}catch(e){}}(o,t,n,i,a);return r}async function ae(e,t,n){const i=function(e){const{title:t,subTitle:n="",to:i="用户",content:o,type:a,from:r="tech-study.js"}=e;let s="";s=Array.isArray(o)?o.map((e=>`<div>${e}</div>`)).join(""):o;const c=de();let l="";return a&&a.length&&("info"===a&&(l='\n      <svg\n       viewBox="64 64 896 896"\n       style="color: #1890ff; width: 18px; height: 18px"\n       fill="currentColor"\n       aria-hidden="true"\n     >\n       <path\n         d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"\n       ></path>\n     </svg>'),"warn"===a&&(l='\n      <svg\n        viewBox="64 64 896 896"\n        style="color: #faad14; width: 18px; height: 18px"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n        <path\n          d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"\n        ></path>\n      </svg>\n      '),"success"===a&&(l='\n      <svg\n        viewBox="64 64 896 896"\n        style="color: #52c41a; width: 18px; height: 18px"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n        <path\n          d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"\n        ></path>\n      </svg>\n      '),"fail"===a&&(l='\n      <svg\n        viewBox="64 64 896 896"\n        style="color: #ff4d4f; width: 18px; height: 18px"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n        <path\n          d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"\n        ></path>\n      </svg>\n      ')),`\n  <div\n  style="\n    padding: 5px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  "\n>\n  <div\n    style="\n      background: #ffffff;\n      box-shadow: 1px 1px 8px -1px #dadada;\n      padding: 5px 10px;\n      border-radius: 5px;\n      width: 100%;\n    "\n  >\n    <div\n      style="\n        display: flex;\n        justify-content: space-between;\n        padding: 5px;\n        border-bottom: 1px solid #eee;\n      "\n    >\n      <div style="display: flex; justify-content: center; align-items: center">\n        \n  <span\n    style="\n      padding-right: 5px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    "\n  >\n    ${l}\n  </span>\n  \n        <span style="padding-left: 5px; font-size: 18px">${t}</span>\n      </div>\n      <div style="font-size: 16px; color: #999">${n}</div>\n    </div>\n    <div></div>\n\n    <div style="padding:10px 5px; font-size: 16px; min-height: 80px">\n      <div>\n        ${ie(i)}, 你好!\n      </div>\n      <div style="line-height: 28px;">${s}</div>\n    </div>\n    <div\n      style="\n        font-size: 14px;\n        padding: 5px;\n        border-top: 1px solid #eee;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      "\n    >\n      <div style="color: #999">${c}</div>\n      <div>\n        <span>来自</span>\n        <span style="color: #1890ff; padding-left: 1px">${r}</span>\n      </div>\n    </div>\n  </div>\n</div>  \n  `}(e),o=await oe({title:"消息提示",content:i,fromToken:t,toToken:n,template:"html"});if(o&&200===o.code)return o}function re(){return(~~(10*Math.random())).toString()}function se(){return String.fromCharCode(65+~~(26*Math.random()))}function ce(){return String.fromCharCode(97+~~(26*Math.random()))}function le(e){return e<10?`0${e}`:`${e}`}function de(e=Date.now()){const t=new Date(e),n=t.getSeconds(),i=t.getMinutes(),o=t.getHours(),a=t.getDate(),r=t.getMonth()+1;return`${[t.getFullYear(),r,a].map(le).join("-")} ${[o,i,n].map(le).join(":")}`}function ue({hour:e,minute:t}){const n=new Date,i=n.getHours(),o=n.getMinutes();return i>e||i===e&&o>=t}function ge(e){const t=document.cookie.split(";");for(const n in t){const i=t[n].split("=");if(i[0].trim()===e)return i[1].trim()}return null}function ve(e,t){null!==ge(e)&&function(e,t,n,i){const o=new Date;o.setTime(o.getTime()+n),document.cookie=`${e}=${t};expires=${o.toUTCString()};path=/;domain=${i}`}(e,"",-1,t)}function pe(e,t){let n=-1;return function(...i){-1!==n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,i)}),t)}}function fe(){let e=!1;return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&(te("移动端"),e=!0),document.body.clientWidth<800&&(te("小尺寸设备端"),e=!0),e}function _e(e){return Number.isInteger(e)||(e=1e3),new Promise((t=>{setTimeout((()=>{t("done")}),e)}))}function he(e){return new Promise((t=>{if((GM_getValue("pauseStudy")||!1)&&(Se.value=!0),Se.value){dt("已暂停, 手动开启自动答题! ",10);const n=setInterval((()=>{if(!Se.value)return clearInterval(n),te("答题等待结束!"),e&&e instanceof Function&&(dt("已开启, 自动答题!"),e(!0)),void t(!0);e&&e instanceof Function&&e(!1),te("答题等待...")}),500)}else t(!0)}))}function me(e){return new Promise((t=>{if(GM_getValue("pauseStudy")||!1){const n=setInterval((()=>{if(!(GM_getValue("pauseStudy")||!1))return clearInterval(n),te("学习等待结束!"),e&&e instanceof Function&&e("done"),void t("done");e&&e instanceof Function&&e("pending"),te("学习等待...")}),500)}else t("done")}))}function we(e,t){const{href:n}=window.location;window.addEventListener("load",(()=>{e instanceof Function?e(n)&&t():"boolean"!=typeof e?n.match(e)&&t():e&&t()}))}const be=[{title:"文章选读",currentScore:0,dayMaxScore:0,need:0,status:!1,tip:"每有效阅读一篇文章积1分，上限6分。有效阅读文章累计1分钟积1分，上限6分。每日上限积12分。",percent:C(0),score:C(0),index:C(_.READ),active:C(!0)},{title:"视听学习",currentScore:0,dayMaxScore:0,need:0,status:!1,tip:"每有效一个音频或观看一个视频积1分，上限6分。有效收听音频或观看视频累计1分钟积1分，上限6分。每日上限积12分。",percent:C(0),score:C(0),index:C(_.WATCH),active:C(!0)},{title:"每日答题",currentScore:0,dayMaxScore:0,need:0,status:!1,tip:"每组答题每答对1道积1分。每日上限积5分。",percent:C(0),score:C(0),index:C(_.PRACTICE),active:C(!0)},{title:"专项练习",currentScore:0,dayMaxScore:0,need:0,status:!1,tip:"每组答题每答对1道积1分，同组答题不重复积分；每日仅可获得一组答题积分，5道题一组的上限5分，10道题一组的上限10分。",percent:C(0),score:C(0),index:C(_.PAPER),active:C(!0)}],ye=j([!1,!1,!1,!1,!1,!1,!1]),xe=C(0),Ee=C(0),ke=j({nick:"",avatar:""}),Me=C(m.LOADING),Se=C(!1),Ae=C(!!ge("token")),Te=C(""),Ce=N([]),Re=C(""),Pe=C(0),Ie=N({title:"",show:!1,exist:!1,closed:!0,ele:void 0,src:""}),Le=C(!1);var Ne;function ze(){return new Promise((e=>{const t=setInterval((()=>{const n=Z(".ant-btn").filter((e=>e.innerText));if(n.length){if(clearInterval(t),2===n.length)return void e(n[1]);e(n[0])}}),500)}))}function $e(){return new Promise((async e=>{const t=Z("#nc_mask")[0];if(t&&"none"!==getComputedStyle(t).display){dt("等待滑动验证"),t.style.zIndex="999";const n=Z(".nc_scale")[0],i=Z(".btn_slide")[0],o=n.getBoundingClientRect(),a=i.getBoundingClientRect(),r=unsafeWindow,s=function(e,t,n){const i=(t.x-e.x)/n,o=(t.y-e.y)/n,a=[];a.push(e);for(let e=0;e<n;e++){const t=a[e].x+5*Math.random()+i,n=a[e].y+5*Math.random()*Math.pow(-1,~~(2*Math.random()+1))+o;a.push({x:t,y:n})}return a}(function(e){const{x:t,y:n,width:i,height:o}=e;return{x:t+Math.random()*i*.5+.25*i,y:n+Math.random()*o*.5+.25*o}}(a),{x:o.x+o.width,y:o.y+o.height/2},10);if(fe()){i.style.touchAction="none";const e=[new Touch({identifier:0,target:i,clientX:s[0].x,clientY:s[0].y})],t=new TouchEvent("touchstart",{targetTouches:e,touches:e,changedTouches:e,view:r,bubbles:!0});i.dispatchEvent(t);for(const e in s){const t=[new Touch({identifier:0,target:i,clientX:s[e].x,clientY:s[e].y})],n=new TouchEvent("touchmove",{targetTouches:t,touches:t,changedTouches:t,view:r,bubbles:!0});i.dispatchEvent(n),await _e(10)}const n=new Touch({identifier:0,target:i,clientX:s[s.length-1].x,clientY:s[s.length-1].y}),o=new TouchEvent("touchend",{targetTouches:[],touches:[],changedTouches:[n],view:r,bubbles:!0});i.dispatchEvent(o)}else{const e=new MouseEvent("mousedown",{clientX:s[0].x,clientY:s[0].y,bubbles:!0,view:r});i.dispatchEvent(e);for(const e in s){const t=new MouseEvent("mousemove",{clientX:s[e].x,clientY:s[e].y,bubbles:!0,view:r});i.dispatchEvent(t),await _e(10)}const t=new MouseEvent("mouseup",{clientX:s[s.length-1].x,clientY:s[s.length-1].y,bubbles:!0,view:r});i.dispatchEvent(t)}dt("滑动验证完成!");const c=setInterval((()=>{const t=Z("#nc_mask")[0];if(!t||"none"===getComputedStyle(t).display)return te("滑动验证成功!"),dt("滑动验证成功!"),clearInterval(c),void e(!0);e(!1),te("滑动验证失败!"),dt("滑动验证失败!")}),1e3)}else e(!0)}))}function je(e){const t=Z(".q-answer");return!(!e.length||!t.length)&&e.every((e=>{if(e&&e.length){let n;if(t.forEach((t=>{const i=t.innerText.trim(),o=i.replaceAll(/[、，,。 ]/g,""),a=e.replaceAll(/[、，,。 ]/g,"");(i===e||i.includes(e)||e.includes(i)||o.includes(a))&&(n?n.innerText.length>i.length&&(n=t):n=t)})),n)return n.classList.contains("chosen")||n.click(),!0}return!1}))}function Ue(){const e=Z(".q-answer");if(e.length){const t=e[~~(Math.random()*e.length)];t.classList.contains("chosen")||t.click()}}function De(){const e=Z(".q-answer");e.length&&e.forEach((e=>{e.classList.contains("chosen")||e.click()}))}!function(e){e[e.PRACTICE=0]="PRACTICE",e[e.PAPER=1]="PAPER"}(Ne||(Ne={}));const He=e=>{const t=Z(".blank");if(t.length&&e.length){if(e.length===t.length)return e.every(((e,n)=>{if(e&&e.length){const i=new Event("input",{bubbles:!0});return t[n].setAttribute("value",e),t[n].dispatchEvent(i),!0}return!1}));if(1===t.length&&e.length>1){const n=e.join("");if(n&&n.length){const e=new Event("input",{bubbles:!0});return t[0].setAttribute("value",n),t[0].dispatchEvent(e),!0}}}return!1};async function Oe(){const e=Z(".blank");if(e.length){const t=new Event("input",{bubbles:!0});e.forEach((e=>{e.setAttribute("value","答案"),e.dispatchEvent(t)}))}}async function Ve(e){let t,n,i=!1;for(;;){await _e(2500),await he(),t=await ze(),n=t.innerText.replaceAll(" ","");if(["再练一次","再来一组","查看解析"].includes(t.innerText))break;Z(".tips")[0]?.click();const o=Z(".line-feed font[color]").map((e=>e.innerText.trim())),s=Z(".q-body")[0].innerText;await _e(1500),await he();const c=Z(".q-answer"),l=Z("input[type=text][class=blank]"),d=Z(".q-header")[0].innerText.substring(0,3);switch(await he(),d){case"填空题":{if(o.length){if(He(o))break}dt("答案异常, 尝试网络题库获取!");const t=await a(s);if(t.length){if(He(t))break}if(e===Ne.PRACTICE||ye[h.RANDOM_EXAM])te("答案不存在, 随机作答!"),dt("答案不存在, 随机作答!"),await Oe();else{dt(`学习推送${await ae({title:"学习推送",to:ke.nick,content:"答题存在异常, 已暂停答题!",type:"fail"},Re.value)?"成功":"失败"}!`),Se.value=!0,i=!0}break}case"多选题":{if(o.length){const e=c.map((e=>e.innerText)).map((e=>e.split(/[A-Z]./)[1].trim())).join(""),t=s.match(/（）/g);if(t&&c.length===t.length||s===e||2===c.length){c.forEach((e=>{e.classList.contains("chosen")||e.click()}));break}if(c.length>=o.length){if(je(o))break}}dt("答案异常, 尝试网络题库获取!");const t=await a(s);if(t.length){if(je(t))break}if(e===Ne.PRACTICE||ye[h.RANDOM_EXAM])te("答案不存在, 随机作答!"),dt("答案不存在, 随机作答!"),await De();else{dt(`学习推送${await ae({title:"学习推送",to:ke.nick,content:"答题存在异常, 已暂停答题!",type:"fail"},Re.value)?"成功":"失败"}!`),Se.value=!0,i=!0}break}case"单选题":{if(o.length)if(1===o.length){if(je(o))break}else{const e=[""," ",",",";",",","、","-","|","+","/"].map((e=>o.join(e)));if(e.every((e=>e.length))){if(e.some((e=>je([e]))))break}}dt("答案异常, 尝试网络题库获取!");const t=await a(s);if(t.length)if(1===t.length){if(je(t))break}else{const e=[""," "].map((e=>o.join(e)));if(e.every((e=>e.length))){if(e.some((e=>je([e]))))break}}if(e===Ne.PRACTICE||ye[h.RANDOM_EXAM])te("答案不存在, 随机作答!"),dt("答案不存在, 随机作答!"),await Ue();else{dt(`学习推送${await ae({title:"学习推送",to:ke.nick,content:"答题存在异常, 已暂停答题!",type:"fail"},Re.value)?"成功":"失败"}!`),Se.value=!0,i=!0}break}}if(await he(),t=await ze(),n=t.innerText.replaceAll(" ",""),i){const e=md5(s),t=[];"填空题"===d&&l.forEach((e=>{t.push(e.value)})),"单选题"!==d&&"多选题"!==d||c.forEach((e=>{if(e.classList.contains("chosen")){const n=e.innerText,[,i]=n.split(".");i&&i.length&&t.push(i)}}));const n=t.join(";");n.length&&(te("上传答案",{answer:n,key:e,question:s}),await r(e,n),te("上传答案成功!")),i=!1}if("确定"===n){t.click(),await _e(2e3),await he();const e=Z(".answer")[0];if(e){const t=md5(s),n=e.innerText,[,i]=n.split("：");if(i&&i.length){const e=i.replaceAll(" ",";");te("上传答案",{answer:e,key:t,question:s}),await r(t,e)}}await $e()}t=await ze(),n=t.innerText.replaceAll(" ",""),"下一题"!==n&&"完成"!==n&&"交卷"!==n||(await _e(2500),t.click())}Fe(Te.value)}async function Ge(){await me(),te("正在每日答题..."),dt("正在每日答题");const e=v.examPractice;await Xe(e,"每日答题"),dt("完成每日答题!"),await _e(1500),await gt(),await vt(),be[_.PRACTICE].active.value&&!be[_.PRACTICE].status&&(te("任务未完成, 继续每日答题!"),dt("任务未完成, 继续每日答题!"),await Ge())}async function Be(){await me();const e=await async function(){const e=await async function(){const e=await s(1);if(e)return await _e(3e3),e.totalPageCount}(),t=ye[h.PAPER_REVERSE];let n=t?e:1;te(`正在${t?"逆序":"顺序"}寻找的专项练习...`),dt(`正在${t?"逆序":"顺序"}寻找的专项练习...`);for(;n<=e&&n;){const e=await s(n);if(!e)break;{const i=e.list;t&&i.reverse();for(const e in i)if(1===i[e].status)return i[e].id;n+=t?-1:1,await _e(3e3)}}}();if(e){await me(),te("正在专项练习..."),dt("正在专项练习");const t=`${v.examPaper}?id=${e}`;return te(`链接: ${t}`),await Xe(t,"专项练习"),dt("完成专项练习!"),await _e(1500),await gt(),await vt(),void(be[_.PAPER].active.value&&!be[_.PAPER].status&&(te("任务未完成, 继续专项练习!"),dt("任务未完成, 继续专项练习!"),Be()))}dt("专项练习均已完成!")}async function We(e,t){if(Ie.src=e,await K(".egg_frame"),Ie.ele){const i=function(e=6){const t=[],n=[re,se,ce];if(e)for(let i=0;i<e;i++){const e=~~(Math.random()*n.length);t.push(n[e]())}return t.join("")}(10);return Ie.closed=!1,Ie.title=t||"",await(n=Ie.ele,new Promise((e=>{n.addEventListener("load",(()=>{e(!0)}))}))),Ie.ele.contentWindow?.postMessage({id:i,closed:!1},e),{id:i,frame:Ie}}var n}function qe(){Ie.ele&&(Ie.show=!1,Ie.closed=!0,Ie.title="",Ie.src="")}function Fe(e){ye[h.SAME_TAB]?window.parent.postMessage({id:e,closed:!0},v.homeOrigin):function(){try{window.opener=window,window.open("","_self")?.close(),top?.close()}catch(e){}}()}async function Xe(e,t){if(ye[h.SAME_TAB]){Ie.exist=!0,Ie.show=!ye[h.SILENT_RUN];const n=await We(e,t);if(n){const{id:e}=n;await function(e){return window.addEventListener("message",(t=>{const{data:n}=t;n.id===e&&n.closed&&qe()})),new Promise((e=>{setInterval((()=>{Ie.closed&&e(!0)}),100)}))}(e)}return}const n=function(e){return GM_openInTab(e,{active:!0,insert:!0,setParent:!0})}(e);await function(e){return new Promise((t=>{const n=setInterval((()=>{e.closed&&(clearInterval(n),t("done"))}),1e3)}))}(n)}let Ye=-1,Je=-1;async function Qe(){te("正在生成登录二维码...");const e=await async function(){try{const e=await fetch(p.generateQRCode,{method:"GET",mode:"cors"});if(e.ok){const t=await e.json();if(t.success)return t.result}}catch(e){}}();if(e){te("生成登录二维码成功!");const t=`https://login.xuexi.cn/login/qrcommit?showmenu=false&code=${e}&appId=dingoankubyrfkttorhpou`;return{code:e,src:`${p.qrcode}?data=${encodeURIComponent(t)}`,url:t}}te("生成登录二维码失败!")}async function Ze(e){te("尝试用二维码登录...");const t=await async function(e){try{const t=new URLSearchParams({qrCode:e,goto:"https://oa.xuexi.cn",pdmToken:""}),n=await fetch(p.loginWithQRCode,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:t.toString()});if(n.ok)return await n.json()}catch(e){}}(e);if(t){const{data:e,code:n,success:i}=t;if(i&&e)return e;if("11019"===n)return}return new Promise((t=>{clearTimeout(Je),Je=setTimeout((async()=>{t(await Ze(e))}),1e3)}))}async function Ke(e){te("正在获取签名...");const t=await async function(){try{const e=await fetch(p.sign,{method:"GET",mode:"cors",credentials:"include"});if(e.ok){const t=await e.json();if(t.ok)return t.data.sign}}catch(e){}}();if(t){const n=crypto.randomUUID(),[,i]=e.split("="),o=`${t}${n}`;return await async function(e){try{const t=new URLSearchParams(e),n=`${p.secureCheck}?${t}`,i=await fetch(n,{method:"GET",mode:"cors",credentials:"include"});if(i.ok)return(await i.json()).success}catch(e){}return!1}({code:i,state:o})}}async function et(){if(clearInterval(Ye),Ye=setInterval((()=>{et()}),u),Pe.value>=d){if(dt("超过最大重试次数, 登录失败!"),Pe.value=0,Le.value=!1,ye[h.REMOTE_PUSH]){dt(`登录推送${await ae({title:"登录推送",content:"超过最大重试次数, 登录失败!",type:"fail"},Re.value)?"成功":"失败"}!`)}return}const e=Z(".egg_login_img_wrap")[0],t=Z(".egg_login_img",e)[0];if(e&&t){te("刷新登录二维码!"),Pe.value++;const e=await Qe();if(e){const{src:n,code:i,url:o}=e;if(t.src=n,Le.value=!0,ye[h.REMOTE_PUSH]){const e=function(e){return`\n     <div style="padding: 10px 0">\n     <div\n       style="\n         display: flex;\n         justify-content: center;\n         align-items: center;\n         padding: 20px;\n         background: #f7f7f7;\n         border-radius: 10px;\n       "\n     >\n         <img src="${e}" style="width:200px;height:200px;" />\n       </div>\n     </div>\n`}(n),t=`\n   <div>\n      或在浏览器\n      <a\n        href="dtxuexi://appclient/page/study_feeds?url=${encodeURIComponent(o)}"\n        style="text-decoration: none"\n        >${ie("打开学习强国APP")}</a\n      >\n    </div>\n  `;dt(`登录推送${await ae({title:"登录推送",content:["扫一扫, 登录学习强国!",t,e],type:"info"},Re.value)?"成功":"失败"}!`)}const a=await Ze(i);if(a){if(await Ke(a)&&(clearInterval(Ye),Le.value=!1,te("登录成功!"),dt("登录成功!"),Ae.value=!0,await ut(),await gt(),await vt(),ye[h.REMOTE_PUSH])){dt(`登录推送${await ae({title:"登录推送",to:ke.nick,content:["学习强国, 登录成功!",`当天积分:  ${ie(Ee.value)} 分`,`总积分: ${ie(xe.value)} 分`,...be.map((e=>ne(e.title,e.percent.value)))],type:"success"},Re.value)?"成功":"失败"}!`)}return}te("登录二维码失效!"),et()}}}let tt=[],nt=[];async function it(e){let t;if(0===e&&(t=1+~~(20*Math.random()+80)),1===e){const e=~~Z("video")[0].duration;t=(e>120?120:e)+(5+~~(10*Math.random()))}const n=t-(4+~~(4*Math.random())),i=8+~~(4*Math.random()),o=unsafeWindow,a=dt("距离关闭页面还剩",t,!0,(async e=>{if(await me(),e===n){o.scrollTo(0,400);const e=new Event("scroll",{bubbles:!0});document.dispatchEvent(e);const t=new MouseEvent("mousemove",{bubbles:!0});document.dispatchEvent(t);const n=new Event("click",{bubbles:!0});document.dispatchEvent(n)}if(e===i){const e=document.body.scrollHeight/2;o.scrollTo(0,e);const t=new Event("scroll",{bubbles:!0});document.dispatchEvent(t);const n=new MouseEvent("mousemove",{bubbles:!0});document.dispatchEvent(n);const i=new Event("click",{bubbles:!0});document.dispatchEvent(i)}}));await a.waitCountDown(),Fe(Te.value)}function ot(){return new Promise((async e=>{const t=be[_.READ].need<c?be[_.READ].need:c;te(`剩余 ${t} 个新闻`);const n=await async function(){const e=~~(Math.random()*p.todayNews.length);try{const t=await fetch(p.todayNews[e],{method:"GET"});if(t.ok)return await t.json()}catch(e){}}();if(n&&n.length)for(;tt.length<t;){const e=n[~~(Math.random()*n.length)];e.dataValid&&"tuwen"===e.type&&tt.push(e)}else tt=[];e("done")}))}function at(){return new Promise((async e=>{const t=be[_.WATCH].need<l?be[_.WATCH].need:l;te(`剩余 ${t} 个视频`);const n=await async function(){const e=~~(Math.random()*p.todayVideos.length);try{const t=await fetch(p.todayVideos[e],{method:"GET"});if(t.ok)return await t.json()}catch(e){}}();if(n&&n.length)for(;nt.length<t;){const e=n[~~(Math.random()*n.length)];!e.dataValid||"shipin"!==e.type&&"juji"!==e.type||nt.push(e)}else nt=[];e("done")}))}async function rt(){await ot();for(const e in tt){if(!be[_.READ].active.value)return;await me(),te(`正在阅读第 ${Number(e)+1} 个新闻...`),dt(`正在阅读第 ${Number(e)+1} 个新闻`);const{url:t}=tt[e];if(GM_setValue("readingUrl",t),await Xe(t,"文章选读"),GM_setValue("readingUrl",null),dt(`完成阅读第 ${Number(e)+1} 个新闻!`),await _e(1500),await gt(),await vt(),be[_.READ].active.value&&be[_.READ].status)break}be[_.READ].active.value&&be[_.READ].active.value&&!be[_.READ].status&&(te("任务未完成, 继续阅读新闻!"),dt("任务未完成, 继续阅读新闻!"),await rt())}async function st(){await at();for(const e in nt){if(!be[_.WATCH].active.value)return;await me(),te(`正在观看第 ${Number(e)+1} 个视频...`),dt(`正在观看第 ${Number(e)+1} 个视频`);const{url:t}=nt[e];if(GM_setValue("watchingUrl",t),await Xe(t,"视听学习"),GM_setValue("watchingUrl",null),dt(`完成观看第 ${Number(e)+1} 个视频!`),await _e(1500),await gt(),await vt(),be[_.WATCH].active.value&&be[_.WATCH].status)break}be[_.WATCH].active.value&&be[_.WATCH].active.value&&!be[_.WATCH].status&&(te("任务未完成, 继续观看视频!"),dt("任务未完成, 继续观看看视频!"),await st())}let ct=-1;async function lt(){if(clearInterval(ct),!Ae.value){const e=Ce.filter((e=>!ue(e)));if(e.length){const t=e[0];te(`已设置 ${t.time} 的定时任务!`),dt(`已设置 ${t.time} 的定时任务!`);let n=0;const i=10;ct=setInterval((()=>{n++%i||te("定时刷新正在运行..."),function({hour:e,minute:t}){const n=new Date,i=n.getHours(),o=n.getMinutes(),a=n.getSeconds();return i===e&&o===t&&0===a}(t)&&(clearInterval(ct),te(`执行 ${t.time} 的定时任务!`),dt(`执行 ${t.time} 的定时任务!`),et())}),1e3)}}}function dt(e,t=2,n=!1,i){const o=Z(".egg_tip_wrap")[0],a=Z(".egg_tip");a.length&&a.forEach((e=>e.delay()));const r=C(t),s=C(e),c=C(!1),l=C(!1);let d=!1,u=!1;const g=function({text:e,count:t,show:n,delayShow:i,countShow:o,callback:a}){return G("div",void 0,{class:O([n,i],(()=>"egg_tip"+(n.value?i.value?" active delay":" active":"")))},[G("span",void 0,{class:"egg_text"},J(e)),V((()=>o.value?G("span",void 0,{class:"egg_countdown"},J(V((()=>`${t.value}s`)))):void 0))],{onMounted(){const e=async()=>{a(t.value),t.value?(t.value--,setTimeout(e,1e3)):n.value=!1};e()}})}({text:s,count:r,show:c,delayShow:l,countShow:C(n),callback:e=>{i&&i(e),l.value&&e===t&&(l.value=!1),e||(u=!0,v.destroy())}}),v={destroy(){if(!d)return v.hide(),d=!0,new Promise((e=>{setTimeout((()=>{g.ele.remove(),e(void 0)}),300)}))},hide(){d||(c.value=!1)},show(){if(!d)return new Promise((e=>{setTimeout((()=>{c.value=!0,e(void 0)}),300)}))},setText(e){d||(s.value=e)},waitCountDown:()=>new Promise((e=>{const t=setInterval((()=>{u&&(clearInterval(t),e(!0))}),100)})),delay(){d||(l.value=!0,r.value+=2)}};return Object.assign(g.ele,v),Q(g,o),v.show(),v}async function ut(){if(!Ae.value)throw te("用户未登录!"),dt("用户未登录!"),new Error("用户未登录!");if(ke.nick)return!0;te("加载用户信息...");const e=await async function(){try{const e=await fetch(p.userInfo,{method:"GET",credentials:"include"});if(e.ok){const{data:t}=await e.json();return t}}catch(e){}}();if(e){const{avatarMediaUrl:t="",nick:n}=e;if(n)return ke.nick=n,ke.avatar=t,!0}return te("加载用户信息失败!"),!1}async function gt(){if(!Ae.value)throw te("用户未登录!"),dt("用户未登录!"),new Error("用户未登录!");te("加载分数信息...");const e=await async function(){try{const e=await fetch(p.totalScore,{method:"GET",credentials:"include"});if(e.ok){const{data:t}=await e.json(),{score:n}=t;return n}}catch(e){}}(),t=await async function(){try{const e=await fetch(p.todayScore,{method:"GET",credentials:"include"});if(e.ok){const{data:t}=await e.json(),{score:n}=t;return n}}catch(e){}}();return Number.isInteger(e)&&Number.isInteger(t)?(xe.value=e,Ee.value=t,!0):(te("加载分数信息失败!"),!1)}async function vt(){if(!Ae.value)throw te("用户未登录!"),dt("用户未登录!"),new Error("用户未登录!");te("加载任务进度...");const e=await async function(){try{const e=await fetch(p.taskList,{method:"GET",credentials:"include"});if(e.ok){const{data:t}=await e.json(),{taskProgress:n}=t;return n}}catch(e){}}();if(e){be[_.READ].currentScore=e[0].currentScore,be[_.READ].dayMaxScore=e[0].dayMaxScore,be[_.READ].need=e[0].dayMaxScore-e[0].currentScore,be[_.WATCH].currentScore=e[1].currentScore+e[2].currentScore,be[_.WATCH].dayMaxScore=e[1].dayMaxScore+e[2].dayMaxScore,be[_.WATCH].need=e[1].dayMaxScore+e[2].dayMaxScore-(e[1].currentScore+e[2].currentScore),be[_.PRACTICE].currentScore=e[5].currentScore,be[_.PRACTICE].dayMaxScore=e[5].dayMaxScore,be[_.PRACTICE].need=e[5].dayMaxScore-e[5].currentScore,be[_.PAPER].currentScore=e[4].currentScore,be[_.PAPER].dayMaxScore=e[4].dayMaxScore,be[_.PAPER].need=e[4].dayMaxScore-e[4].currentScore;for(const e in be){const{currentScore:t,dayMaxScore:n}=be[e];let i=Number((100*t/n).toFixed(1));n<=t&&(i=100,be[e].status=!0),be[e].percent.value=i,be[e].score.value=t}return!0}return await _e(2e3),vt()}function pt({text:e}){return G("div",void 0,{class:"egg_hr_wrap"},[G("div",void 0,{class:"egg_hr"}),G("div",void 0,{class:"egg_hr_title"},J(e)),G("div",void 0,{class:"egg_hr"})])}function ft(){const e=C(!1);return D((()=>ye[h.SILENT_RUN]),(()=>{Ie.show=ye[h.SILENT_RUN]})),G("div",void 0,{class:V((()=>"egg_frame_wrap"+(Ie.show?"":" hide")))},O((()=>[Ae.value,ye[h.SAME_TAB]]),(()=>{if(Ae.value&&ye[h.SAME_TAB])return[G("div",void 0,{class:"egg_frame_mask"}),G("div",void 0,{class:V((()=>"egg_frame_content_wrap "+(e.value?" max":"")))},[G("div",void 0,{class:"egg_frame_controls_wrap"},[G("div",void 0,{class:"egg_frame_title"}),G("div",void 0,{class:"egg_frame_controls"},[G("button",void 0,{class:"egg_frame_btn",type:"button",onclick:pe((()=>{Ie.show=!1}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M863.7 552.5H160.3c-10.6 0-19.2-8.6-19.2-19.2v-41.7c0-10.6 8.6-19.2 19.2-19.2h703.3c10.6 0 19.2 8.6 19.2 19.2v41.7c0 10.6-8.5 19.2-19.1 19.2z"}))),G("button",void 0,{class:"egg_frame_btn",type:"button",onclick:pe((()=>{e.value=!e.value}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M609.52 584.92a35.309 35.309 0 0 1 24.98-10.36c9.37 0 18.36 3.73 24.98 10.36l189.29 189.22-0.07-114.3 0.57-6.35c3.25-17.98 19.7-30.5 37.9-28.85 18.2 1.65 32.12 16.92 32.09 35.2v200.23c-0.05 1.49-0.19 2.97-0.42 4.45l-0.21 1.13c-0.22 1.44-0.55 2.85-0.99 4.24l-0.57 1.62-0.56 1.41a34.163 34.163 0 0 1-7.62 11.36l2.12-2.4-0.14 0.14-0.92 1.06-1.06 1.2-0.57 0.57-0.56 0.57a36.378 36.378 0 0 1-16.23 8.39l-3.53 0.5-4.02 0.35h-199.6l-6.35-0.63c-16.73-3.06-28.9-17.63-28.93-34.64l0.56-6.35c3.07-16.76 17.67-28.93 34.71-28.92l114.29-0.14-189.07-189.1-4.09-4.94c-9.71-14.01-8.01-32.95 4.02-45.02z m-162.06 0c12.06 12.05 13.78 30.99 4.09 45.01l-4.09 4.94-189.15 189.08 114.3 0.14c17.04-0.01 31.65 12.17 34.71 28.92l0.57 6.35c-0.03 17.01-12.19 31.58-28.92 34.64l-6.35 0.63H173.09l-4.23-0.42-3.39-0.49a36.38 36.38 0 0 1-17.36-9.52l-1.06-1.13-0.98-1.13 0.98 1.06-1.97-2.26 0.85 1.06-0.42-0.56a35.137 35.137 0 0 1-3.74-5.64l-1.13-2.68a34.71 34.71 0 0 1-2.11-7.33l-0.28-1.13c-0.21-1.47-0.33-2.96-0.36-4.45V659.78c-0.03-18.28 13.89-33.55 32.09-35.2 18.2-1.65 34.65 10.87 37.9 28.85l0.57 6.35-0.07 114.36 189.29-189.22c13.77-13.77 36.11-13.77 49.88 0h-0.09z m-74.71-471.71l6.35 0.57c16.76 3.06 28.93 17.67 28.92 34.71l-0.63 6.35c-3.07 16.76-17.67 28.93-34.71 28.92l-114.3 0.14 189.15 189.08 4.09 4.94c10.26 15.02 7.42 35.37-6.55 47.01-13.98 11.63-34.51 10.74-47.42-2.07L208.29 233.71l0.07 114.3-0.57 6.35c-3.25 17.98-19.7 30.5-37.9 28.85-18.2-1.65-32.12-16.92-32.09-35.2V147.78c0-1.55 0.14-3.03 0.35-4.51l0.21-1.13c0.24-1.44 0.59-2.85 1.06-4.23a34.97 34.97 0 0 1 8.68-14.39l-2.12 2.4-0.42 0.57 1.55-1.84-0.99 1.06 0.92-0.98 2.26-2.33c3.04-2.73 6.52-4.92 10.3-6.49l2.82-1.06c3.45-1.07 7.04-1.62 10.65-1.62l-3.6 0.14h0.49l1.48-0.14h201.31z m512.91 0l1.41 0.14h0.42c2.43 0.29 4.84 0.79 7.19 1.48l2.82 1.06 2.61 1.2 3.04 1.76c2.09 1.33 4.03 2.89 5.78 4.66l1.13 1.2 0.78 0.98 0.21 0.14 0.49 0.64 2.33 3.17c2.35 3.83 3.98 8.07 4.8 12.49l0.21 1.13c0.21 1.48 0.35 2.96 0.35 4.44v200.37c-0.16 18.13-14.03 33.19-32.08 34.83-18.06 1.64-34.42-10.67-37.83-28.48l-0.57-6.35V233.65L659.54 422.87c-12.9 12.95-33.56 13.91-47.59 2.2-14.04-11.71-16.81-32.2-6.38-47.22l4.02-4.86 189.22-189.08-114.29-0.14c-17.06 0.04-31.71-12.14-34.78-28.92l-0.63-6.35c-0.01-17.04 12.16-31.65 28.93-34.71l6.35-0.57h201.27z m0 0"}))),G("button",void 0,{class:"egg_frame_btn",type:"button",onclick:pe((()=>{qe()}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M453.44 512L161.472 220.032a41.408 41.408 0 0 1 58.56-58.56L512 453.44 803.968 161.472a41.408 41.408 0 0 1 58.56 58.56L570.56 512l291.968 291.968a41.408 41.408 0 0 1-58.56 58.56L512 570.56 220.032 862.528a41.408 41.408 0 0 1-58.56-58.56L453.44 512z"})))])]),G("div",void 0,{class:"egg_frame_content"},V((()=>Ie.src?[G("iframe",void 0,{class:"egg_frame",src:Ie.src,ref(e){Ie.ele=e}},void 0)]:void 0)))],{onMounted(){D((()=>[ye[h.SAME_TAB],ye[h.SILENT_RUN]]),(()=>{ye[h.SAME_TAB]&&(Ie.show=!ye[h.SILENT_RUN])}))}})]})),{onMounted(){D((()=>[Ae.value,ye[h.SAME_TAB]]),(()=>Ae.value&&!ye[h.SAME_TAB]&&qe()))}})}function _t(){return V((()=>Ae.value?void 0:G("div",void 0,{class:"egg_login_item"},[G("button",void 0,{type:"button",class:"egg_login_btn",onclick:pe((async()=>{et()}),300)},J("扫码登录")),G("div",void 0,{class:V((()=>"egg_login_img_wrap"+(Le.value?" active":"")))},G("img",void 0,{class:"egg_login_img"}))],{onMounted(){D((()=>ye[h.SCHEDULE_RUN]),(()=>{ye[h.SCHEDULE_RUN]||et()}),!0)}})))}function ht(){return V((()=>{if(Ae.value)return G("div",void 0,{class:"egg_info_item"},[G("div",void 0,{class:"egg_userinfo"},[G("div",void 0,{class:"egg_avatar"},V((()=>[ke.avatar?G("img",void 0,{src:ke.avatar,class:"egg_avatar_img"}):G("div",void 0,{class:"egg_avatar_nick"},J(V((()=>ke.nick.substring(1,3)))))]))),G("div",void 0,{class:"egg_nick"},J(V((()=>ke.nick))))]),G("button",void 0,{type:"button",class:"egg_login_btn",onclick:pe((()=>{ve("token",".xuexi.cn"),qe(),Ie.exist=!1,Ae.value=!1,ke.nick="",ke.avatar="",xe.value=0,Ee.value=0,be.forEach((e=>{e.percent.value=0})),Me.value=m.LOADING,te("退出登录")}),300)},J("退出"))],{onMounted(){ut()}})}))}function mt(){return V((()=>{if(Ae.value){const e=C(!1);return G("div",void 0,{class:"egg_score_item"},G("div",void 0,{class:"egg_scoreinfo"},[G("div",void 0,{class:"egg_totalscore"},[J("总积分"),G("span",void 0,void 0,J(xe))]),G("div",void 0,{class:"egg_todayscore"},[G("button",void 0,{type:"button",class:"egg_todayscore_btn",title:"查看分数详情",onclick:pe((()=>{e.value=!e.value}),300),onblur:()=>{e.value=!1}},[J("当天分数"),G("span",void 0,void 0,J(Ee)),B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M332.16 883.84a40.96 40.96 0 0 0 58.24 0l338.56-343.04a40.96 40.96 0 0 0 0-58.24L390.4 140.16a40.96 40.96 0 0 0-58.24 58.24L640 512l-307.84 314.24a40.96 40.96 0 0 0 0 57.6z"})),G("div",void 0,{class:V((()=>"egg_score_details"+(e.value?"":" hide")))},[G("div",void 0,{class:"egg_score_title"},[B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},[B("path",void 0,{d:"M314.81 304.01h415.86v58.91H314.81zM314.81 440.24h415.86v58.91H314.81z"}),B("path",void 0,{d:"M814.8 892.74h-8.64l-283.51-182-283.51 182h-8.64A69.85 69.85 0 0 1 160.72 823V188.22a69.85 69.85 0 0 1 69.77-69.77H814.8a69.85 69.85 0 0 1 69.77 69.77V823a69.85 69.85 0 0 1-69.77 69.74zM230.5 177.35a10.87 10.87 0 0 0-10.86 10.86V823a10.86 10.86 0 0 0 5 9.11l298.01-191.42 298.06 191.38a10.86 10.86 0 0 0 5-9.11V188.22a10.87 10.87 0 0 0-10.86-10.86z"})]),G("div",void 0,{class:"egg_score_title_text"},J("积分详情"))]),...be.map((e=>G("div",void 0,{class:"egg_score_item"},[J(e.title),G("span",void 0,{class:"egg_score_detail"},J(e.score))])))])])])]),{onMounted(){gt()}})}}))}function wt({title:e,tip:t,checked:n,onChange:i}){return G("div",void 0,{class:"egg_setting_item"},[G("div",void 0,{class:"egg_label_wrap"},[G("label",void 0,{class:"egg_task_title"},[J(e),G("span",void 0,{class:"egg_detail",title:t},J("i"))])]),G("input",void 0,{title:t,class:"egg_switch",type:"checkbox",checked:n,onChange:i})])}function bt(){const e=(e,t,n)=>{const{checked:i}=e.target;be[t].active.value!==i&&(be[t].active.value=i,GM_setValue("taskConfig",JSON.stringify(be)),dt(`${n} ${i?"打开":"关闭"}!`))};D(Ae,(async()=>{if(Ae.value){if(await vt(),be.some((e=>e.active&&!e.status)))return GM_setValue("pauseStudy",!1),void(Me.value=m.LOADED);Me.value=m.FINISH}}),!0);const t=C(!1),n=C(-1),i=[];return C(-1),G("div",void 0,{class:"egg_task_list",onmouseup:O(t,(()=>t.value?e=>{const{clientY:n}=e;i.reduce(((e,t,i)=>(e[1]<n&&t[1]>n&&console.log(i),t))),t.value=!1}:void 0)),ondblclick(){}},O((()=>be.map((e=>e.index.value))),(()=>{const o=be.sort(((e,t)=>e.index.value-t.index.value)).map((e=>({title:e.title,tip:e.tip,active:e.active}))).map(((o,a)=>{const r=pe(e,300),s=V((()=>n.value===a)),c=j({x:0,y:0});let l=0,d=0;const u=function({title:e,tip:t,checked:n,onchange:i,onmousedown:o,onmousemove:a,onmouseup:r,percent:s,edit:c,drag:l,position:d,onMounted:u}){return G("div",void 0,{class:O([l,c],(()=>"egg_task_item"+(c.value?l.value?" edit drag":" edit":""))),onmousedown:O(l,(()=>e=>{o(e),window.addEventListener("mousemove",a);const t=e=>{r(e),window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",a)};window.addEventListener("mouseup",t)})),style:O((()=>[l.value,d.x,d.y]),(()=>l.value?`left: ${d.x}px;top: ${d.y}px;`:""))},[G("div",void 0,{class:"egg_task_content"},[G("div",void 0,{class:"egg_label_wrap"},[G("label",void 0,{class:"egg_task_title"},J(e)),G("div",void 0,{class:"egg_progress"},[G("div",void 0,{class:"egg_track"},G("div",void 0,{class:"egg_bar",style:V((()=>`width: ${s.value}%;`))})),G("div",void 0,{class:"egg_percent"},[G("span",void 0,void 0,[J(s)]),J("%")])])]),G("input",void 0,{title:t,class:"egg_switch",type:"checkbox",disabled:c,checked:n,onchange:i})])],{onMounted:u})}({title:o.title,tip:o.tip,checked:o.active,percent:be[a].percent,drag:s,edit:t,position:c,onchange(e){r(e,a,o.title)},onmousedown(e){const{offsetLeft:t,offsetTop:i}=e.currentTarget,{clientX:o,clientY:r}=e;n.value=a,c.x=t,c.y=i,l=o,d=r},onmousemove(e){const{clientX:t,clientY:n}=e;c.x+=t-l,c.y+=n-d,l=t,d=n},onmouseup(){n.value=-1,c.x=0,c.y=0},onMounted(){const e=u.ele.getBoundingClientRect(),t=e.y,n=e.y+e.height/2,o=e.y+e.height;i.push([t,n,o])}});return u}));return o})))}function yt(){return V((()=>{if(Ae.value){async function e(){dt("开始学习!"),await me(),be[_.READ].active.value&&!be[_.READ].status&&(te("任务一: 文章选读"),dt("任务一: 文章选读"),await me(),await rt()),te("任务一: 文章选读已完成!"),be[_.WATCH].active.value&&!be[_.WATCH].status&&(te("任务二: 视听学习"),dt("任务二: 视听学习"),await me(),await st()),te("任务二: 视听学习已完成!"),be[_.PRACTICE].active.value&&!be[_.PRACTICE].status&&(te("任务三: 每日答题"),dt("任务三: 每日答题"),await me(),await Ge()),te("任务三: 每日答题已完成!"),be[_.PAPER].active.value&&!be[_.PAPER].status&&(te("任务四: 专项练习"),dt("任务四: 专项练习"),await me(),await Be()),te("任务四: 专项练习已完成!")}function t(){GM_setValue("pauseStudy",!0),Me.value=m.PAUSE}function n(){GM_setValue("pauseStudy",!1),Me.value=m.START}async function i(){if(be.some((e=>e.active&&!e.status))){Me.value=m.START;try{await e(),ye[h.SAME_TAB]&&(qe(),Ie.exist=!1)}catch(e){console.log("error",e)}}if(Me.value=m.FINISH,te("已完成"),dt("完成学习!"),ye[h.REMOTE_PUSH]){dt(`学习推送${await ae({title:"学习推送",to:ke.nick,content:["学习强国, 学习完成!",`当天积分:  ${ie(Ee.value)} 分`,`总积分: ${ie(xe.value)} 分`,...be.map((e=>ne(e.title,e.percent.value)))],type:"success"},Re.value)?"成功":"失败"}!`)}}let o=!1;return D((()=>[Me.value,ye[h.AUTO_START]]),(async()=>{if(!o&&Me.value===m.LOADED&&ye[h.AUTO_START]){o=!0;const e=dt("即将自动开始任务",5,!0);if(await e.waitCountDown(),ye[h.AUTO_START]&&Me.value!==m.START)return dt("自动开始任务"),void i();o=!1,dt("已取消自动开始任务!")}})),G("div",void 0,{class:"egg_study_item"},G("button",void 0,{class:V((()=>"egg_study_btn"+(Me.value===m.LOADING||Me.value===m.START?" loading":Me.value===m.FINISH?" disabled":""))),type:"button",disabled:V((()=>Me.value===m.LOADING||Me.value===m.FINISH)),onclick:V((()=>Me.value===m.LOADED?pe(i,300):Me.value===m.START?pe(t,300):Me.value===m.PAUSE?pe(n,300):void 0))},J(V((()=>""+(Me.value===m.LOADING?"等待中":Me.value===m.LOADED?"开始学习":Me.value===m.START?"正在学习, 点击暂停":Me.value===m.PAUSE?"继续学习":Me.value===m.FINISH?"已完成":""))))))}}))}function xt({hour:e,minute:t}){const n=new Array(24).fill(void 0).map(((e,t)=>({value:t,label:le(t),active:C(!1),ele:C(null)}))),i=new Array(60).fill(void 0).map(((e,t)=>({value:t,label:le(t),active:C(!1),ele:C(null)}))),o=C(!1),a=C(!1);return G("div",void 0,{class:"egg_time_input"},[G("div",void 0,{class:"egg_hour_wrap"},[G("input",void 0,{placeholder:"12",class:"egg_hour",type:"text",maxlength:"2",onfocus:()=>{o.value=!0},oninput:t=>{const n=t.target.value.trim();/^([0-9]|[01][0-9]|[2][0-3])$/.test(n)&&(e.value=Number(n))},onblur:t=>{const n=t.target,i=n.value.trim();e.value=/^([0-9]|[01][0-9]|[2][0-3])$/.test(i)?Number(i):-1,-1===e.value&&(n.value=""),setTimeout((()=>{o.value=!1}),100)}}),G("div",void 0,{class:V((()=>"egg_list"+(o.value?"":" hide")))},n.map((t=>G("div",void 0,{class:V((()=>"egg_time"+(t.active.value?" focus":""))),onclick:pe((()=>{const n=Z(".egg_hour")[0];e.value=t.value,n.value=t.label}),300),ref:t.ele},J(t.label)))))]),G("span",void 0,void 0,J(":")),G("div",void 0,{class:"egg_minute_wrap"},[G("input",void 0,{placeholder:"00",class:"egg_minute",type:"text",maxlength:"2",onfocus:()=>{a.value=!0},oninput:e=>{const n=e.target.value.trim();/^([0-9]|[0-5][0-9])$/.test(n)&&(t.value=Number(n))},onblur:e=>{const n=e.target,i=n.value.trim();t.value=/^([0-9]|[0-5][0-9])$/.test(i)?Number(i):-1,-1===t.value&&(n.value=""),setTimeout((()=>{a.value=!1}),100)}}),G("div",void 0,{class:V((()=>"egg_list"+(a.value?"":" hide")))},i.map((e=>G("div",void 0,{class:V((()=>"egg_time"+(e.active.value?" focus":""))),onclick:pe((()=>{const n=Z(".egg_minute")[0];t.value=e.value,n.value=e.label}),300),ref:e.ele},J(e.label)))))])],{onMounted(){H((()=>{const t=Z(".egg_hour_wrap .egg_list")[0],i=n.findIndex((t=>!(!e.value||!t.label.includes(String(e.value)))));n.forEach(((e,n)=>{i+1?(e.active.value=n===i,e.active.value&&(t.scrollTop=e.ele.value?.offsetTop||0)):(e.active.value=!1,t.scrollTop=0)}))})),H((()=>{const e=Z(".egg_minute_wrap .egg_list")[0],n=i.findIndex((e=>!(!t.value||!e.label.includes(String(t.value)))));i.forEach(((t,i)=>{n+1?(t.active.value=i===n,t.active.value&&(e.scrollTop=t.ele.value?.offsetTop||0)):(t.active.value=!1,e.scrollTop=0)}))}))}})}function Et({scheduleShow:e}){let t="",n=C(-1),i=C(-1);return G("div",void 0,{class:V((()=>"egg_schedule"+(e.value?" active":"")))},[V((()=>ye[h.REMOTE_PUSH]?G("div",void 0,{class:"egg_schedule_token_wrap"},[G("div",void 0,{class:"egg_schedule_token"},[G("div",void 0,{class:"egg_schedule_label"},J("我的 token")),G("input",void 0,{class:"egg_schedule_token_input",placeholder:"用户 token",maxlength:32,value:Re.value,onfocus:e=>{e.target.classList.add("active");Z(".egg_schedule_submit_btn_wrap")[0].classList.add("active")},onblur:e=>{const n=e.target,i=n.value.trim();/^[0-9a-z]{32}$/.test(i)?(t=i,n.value=i):t="",n.classList.remove("active"),setTimeout((()=>{Z(".egg_schedule_submit_btn_wrap")[0].classList.remove("active"),n.value=Re.value}),100)}})]),G("div",void 0,{class:"egg_schedule_submit_btn_wrap"},G("button",void 0,{class:"egg_schedule_submit_btn",onclick:pe((()=>{dt("用户 token 已保存!"),t!==Re.value&&(Re.value=t,GM_setValue("pushToken",t))}),300)},J("保存")))]):void 0)),V((()=>ye[h.SCHEDULE_RUN]?G("div",void 0,{class:"egg_schedule_add"},[G("div",void 0,{class:"egg_schedule_time_wrap"},[G("div",void 0,{class:"egg_schedule_time"},[G("div",void 0,{class:"egg_schedule_label"},J("设置时间")),G("div",void 0,{class:"egg_schedule_time_input_wrap"},[xt({hour:n,minute:i}),G("button",void 0,{class:"egg_schedule_add_btn",onclick:pe((()=>{if(!ye[h.SCHEDULE_RUN])return void dt("未开启定时刷新!");if(-1===n.value||-1===i.value)return void dt("时间格式不符合要求!");if(Ce.find((e=>e.hour===n.value&&e.minute===i.value)))return void dt("设置定时任务重复!");dt("设置定时任务成功!"),Ce.push({hour:n.value,minute:i.value,time:`${le(n.value)}:${le(i.value)}`}),Ce.sort(((e,t)=>e.hour===t.hour?e.minute-t.minute:e.hour-t.hour)),GM_setValue("scheduleList",JSON.stringify(Ce)),n.value=-1,i.value=-1;Z(".egg_time_input input").forEach((e=>e.value="")),lt()}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},B("path",void 0,{d:"M801.171 483.589H544V226.418c0-17.673-14.327-32-32-32s-32 14.327-32 32v257.171H222.83c-17.673 0-32 14.327-32 32s14.327 32 32 32H480v257.17c0 17.673 14.327 32 32 32s32-14.327 32-32v-257.17h257.171c17.673 0 32-14.327 32-32s-14.327-32-32-32z"})))])])]),G("div",void 0,{class:"egg_schedule_list"},V((()=>Ce.length?Ce.map((e=>G("div",void 0,{class:"egg_schedule_item"},[G("div",void 0,{class:"egg_schedule_detail_time_wrap"+(ue(e)?" inactive":"")},[G("div",void 0,{class:"egg_schedule_detail_icon"},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},[B("path",void 0,{d:"M810.137703 213.860762c-164.388001-164.4187-431.887404-164.4187-596.277452 0-164.417677 164.388001-164.417677 431.889451 0 596.278475 164.390048 164.417677 431.890474 164.417677 596.277452 0C974.557426 645.750213 974.557426 378.248763 810.137703 213.860762zM767.347131 767.345596c-140.797723 140.829446-369.927237 140.797723-510.693238 0-140.828422-140.797723-140.828422-369.895515 0-510.708588 140.767024-140.783397 369.896538-140.813073 510.693238 0C908.14383 397.420405 908.14383 626.578572 767.347131 767.345596z"}),B("path",void 0,{d:"M721.450824 521.495258 515.404028 521.495258l0.028653-227.948619c0-15.124466-12.362562-27.458375-27.501354-27.458375s-27.443026 12.33391-27.443026 27.458375l0 235.115855c0 0.835018-1.013073 20.48659 12.094456 34.459836 8.331759 8.809643 20.038382 13.288654 35.148521 13.288654l213.720569 0.031722c15.140839 0 27.472702-12.304234 27.472702-27.474748C748.922503 533.887496 736.620315 521.584286 721.450824 521.495258z"})])),G("div",void 0,{class:"egg_schedule_detail_time"},J(e.time))]),G("div",void 0,{class:"egg_schedule_detail_del_wrap"},[G("button",void 0,{class:"egg_schedule_del_btn",onclick:pe((()=>{if(!ye[h.SCHEDULE_RUN])return void dt("未开启定时刷新!");const t=Ce.findIndex((t=>t===e));Ce.splice(t,1),GM_setValue("scheduleList",JSON.stringify(Ce)),lt()}),300)},B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},[B("path",void 0,{d:"M896.22 896.22c14.262-14.263 11.263-40.449-6.583-58.295L230.473 178.76c-17.847-17.847-44.105-20.846-58.295-6.583-14.263 14.19-11.264 40.448 6.583 58.295l659.164 659.164c17.846 17.846 44.032 20.845 58.294 6.582"}),B("path",void 0,{d:"M172.178 896.22c-14.263-14.263-11.264-40.449 6.583-58.295L837.925 178.76c17.846-17.847 44.032-20.846 58.294-6.583 14.263 14.19 11.264 40.448-6.582 58.295L230.4 889.637c-17.847 17.846-44.105 20.845-58.295 6.582"})]))])]))):[G("div",void 0,{class:"egg_schedule_list_none"},[B("svg",void 0,{viewBox:"0 0 1024 1024",class:"egg_icon"},[B("path",void 0,{d:"M238.1 520.5c-17.6 0-31.9-14.3-31.9-31.9 0-17.6 14.3-31.9 31.9-31.9h293c17.6 0 31.9 14.3 31.9 31.9 0 17.6-14.3 31.9-31.9 31.9h-293zM238.1 733.6c-17.6 0-31.9-14.3-31.9-31.9s14.3-31.9 31.9-31.9h186.5c17.6 0 31.9 14.3 31.9 31.9s-14.3 31.9-31.9 31.9H238.1zM241.6 314.9c-17.6 0-31.9-14.3-31.9-31.9s14.3-31.9 31.9-31.9h426.1c17.6 0 31.9 14.3 31.9 31.9 0 17.5-14.3 31.7-31.8 31.9H241.6z"}),B("path",void 0,{d:"M160 926.6c-46.9 0-85.1-38.2-85.1-85.1V149.1c0-46.9 38.2-85.1 85.1-85.1h586c46.9 0 85.1 38.2 85.1 85.1v297.4c0 17.6-14.3 31.9-31.9 31.9-17.6 0-31.9-14.3-31.9-31.9V149.1c0-11.8-9.6-21.4-21.4-21.4H160c-11.8 0-21.4 9.6-21.4 21.4v692.4c0 11.8 9.6 21.4 21.4 21.4h304.5c17.5 0 31.8 14.2 31.9 31.8 0 17.6-14.3 31.8-31.9 31.8H160z"}),B("path",void 0,{d:"M917.2 959.9c-8.5 0-16.5-3.3-22.5-9.3l-78.5-78.5-5.3-0.5-0.6 0.4c-31.7 21.6-68.7 33-107 33-105.2 0-190.8-85.6-190.8-190.8s85.6-190.8 190.8-190.8c105.2 0 190.8 85.6 190.8 190.8 0 38.2-11.4 75.2-33 107l-0.4 0.6 0.5 5.3 78.5 78.5c6 6 9.3 14 9.3 22.5s-3.4 16.5-9.4 22.5c-5.9 6-13.9 9.3-22.4 9.3zM703.4 587c-70.1 0-127.2 57.1-127.2 127.2s57.1 127.2 127.2 127.2 127.2-57.1 127.2-127.2S773.6 587 703.4 587z"})]),G("div",void 0,{class:"egg_schedule_list_none_text"},J("暂无定时任务"))])])))]):void 0))],{onMounted(){D((()=>ye[h.REMOTE_PUSH]),(()=>{if(ye[h.REMOTE_PUSH])try{const e=GM_getValue("pushToken");e&&(Re.value=e)}catch(e){}}),!0),D((()=>ye[h.SCHEDULE_RUN]),(()=>{if(ye[h.SCHEDULE_RUN]){try{const e=JSON.parse(GM_getValue("scheduleList"));if(e&&Array.isArray(e))for(const t in e)Ce[t]=e[t]}catch(e){}lt()}else clearInterval(ct)}),!0)}})}
